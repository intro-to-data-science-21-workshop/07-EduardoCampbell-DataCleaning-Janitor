<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Cleaning dirty data with janitor</title>

<script src="janitor_workshop_exercises_files/header-attrs-2.11/header-attrs.js"></script>
<script src="janitor_workshop_exercises_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="janitor_workshop_exercises_files/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="janitor_workshop_exercises_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="janitor_workshop_exercises_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="janitor_workshop_exercises_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="janitor_workshop_exercises_files/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="janitor_workshop_exercises_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="janitor_workshop_exercises_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="janitor_workshop_exercises_files/navigation-1.1/tabsets.js"></script>
<link href="janitor_workshop_exercises_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="janitor_workshop_exercises_files/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>






<link rel="stylesheet" href="custom.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "î‰™";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "î‰™";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">



<h1 class="title toc-ignore">Cleaning dirty data with janitor</h1>
<h3 class="subtitle">Workshop Presentation</h3>

</div>


<div id="why-janitor" class="section level2">
<h2>Why Janitor? ðŸ’»</h2>
<p>Data scientists, according to interviews and expert estimates, spend from 50 percent to 80 percent of their time mired in this more mundane labor of collecting and preparing unruly digital data, before it can be explored for useful nuggets. - <a href="https://www.nytimes.com/2014/08/18/technology/for-big-data-scientists-hurdle-to-insights-is-janitor-work.html">For Big-Data Scientists, â€˜Janitor Workâ€™ Is Key Hurdle to Insight - New York Times, 2014</a></p>
<p>As a budding data scientist, do you feel like you spend a lot of time <strong>tidying</strong> data? Renaming columns, deleting unnecessary information, wrangling data into <code>tidy data</code> format? If your answer to this question is yes, this session is for you.âœ¨</p>
<p>The janitor package is a great tool and simple to use for cleaning and examining data. Janitor is very user friendly as it was built with beginning and intermediate R users in mind. Advanced R users can already do almost everything that this package does, however with janitor they will save time.</p>
</div>
<div id="janitor" class="section level2">
<h2>Janitor</h2>
<p>The janitor package is a R package that has simple functions for examining and cleaning dirty data. While cleaning and exploring data are some of its key functions, janitor also offers some functions to create and format frequency tables.</p>
<p>The main janitor functions:</p>
<ul>
<li>perfectly format data.frame column names</li>
<li>create and format frequency tables of one, two, or three variables (an improved table() function)</li>
<li>provide other tools for cleaning and examining data.frames</li>
</ul>
<p>It is important to notice that janitor is a <strong>tidyverse-oriented package</strong>. In other words, it plays nicely with the %&gt;% pipe and is optimized for cleaning data brought in with the readr and readxl packages.</p>
<p>In this presentation you will learn:</p>
<ul>
<li>what we mean by dirty data</li>
<li>how to save time cleaning data</li>
<li>key functions of the janitor package</li>
</ul>
<p>The presentation will be divided into two parts:</p>
<ol style="list-style-type: decimal">
<li>Cleaning a dirty dataset</li>
<li>Creating and editing table</li>
</ol>
</div>
<div id="section-1-cleaning-a-dirty-dataset" class="section level2">
<h2>Section 1: Cleaning a dirty dataset</h2>
<p>One of the best features of the janitor package is how it can help you to clean messy data tables, which you receive in excel format or download from the web. Our excel spreadsheet contains fake data about attendees at the â€˜Hertie end of year partyâ€™. It looks like this:</p>
<p><img src="excel_image.jpg" width="100%" style="display: block; margin: auto;" /></p>
<p>Letâ€™s load the excel file and check how it loads in R.</p>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Guest list for Hertie end of year party"],"name":[1],"type":["chr"],"align":["left"]},{"label":["...2"],"name":[2],"type":["chr"],"align":["left"]},{"label":["...3"],"name":[3],"type":["chr"],"align":["left"]},{"label":["...4"],"name":[4],"type":["chr"],"align":["left"]},{"label":["...5"],"name":[5],"type":["chr"],"align":["left"]},{"label":["...6"],"name":[6],"type":["chr"],"align":["left"]},{"label":["...7"],"name":[7],"type":["chr"],"align":["left"]},{"label":["...8"],"name":[8],"type":["chr"],"align":["left"]},{"label":["...9"],"name":[9],"type":["chr"],"align":["left"]}],"data":[{"1":"Note to organiser - remember to update this spreadsheet whenever anyone RSVPs","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA"},{"1":"Name","2":"Year","3":"Paid for ticket?","4":"RSVP?","5":"Date RSVP","6":"email address","7":"Favourite drink","8":"Allergies","9":"Any other details"},{"1":"Caitlin Sarro","2":"2","3":"YES","4":"YES","5":"44513","6":"Caitlin.sarro@gmail.com","7":"NA","8":"?","9":"No"},{"1":"Lisa Pramann","2":"2","3":"YES","4":"YES","5":"44515","6":"lisapramann@t-online.de","7":"NA","8":"nuts","9":"No"},{"1":"Marina Luna","2":"2","3":"No","4":"NO","5":"NA","6":"marina.monteiro.luna@gmail.com","7":"NA","8":"?","9":"No"},{"1":"Camilla Beer","2":"second","3":"No","4":"NO","5":"NA","6":"c.beer@mpp.hertie-school.org","7":"NA","8":"?","9":"No"},{"1":"Tom Arend","2":"2","3":"No","4":"No","5":"NA","6":"tom_arend@hotmail.de","7":"NA","8":"shellfish","9":"No"},{"1":"Simon Munzert","2":"second year","3":"No","4":"NO","5":"NA","6":"munzert@hertie-school.org","7":"NA","8":"?","9":"No"},{"1":"Julia Ellingwood","2":"2","3":"Yes","4":"Yes","5":"44520","6":"julia.ellingwood@gmail.com","7":"NA","8":"?","9":"No"},{"1":"Rodrigo Bolanos","2":"II","3":"Yes","4":"Yes","5":"44521","6":"rodbol89@gmail.com","7":"NA","8":"chocolate","9":"No"},{"1":"Eduardo Campbell","2":"2","3":"No","4":"No","5":"NA","6":"ecampbell1096@gmail.com","7":"NA","8":"?","9":"No"},{"1":"Extra invites after 1 December","2":"NA","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA","9":"NA"},{"1":"Sangeeth Selvaraju","2":"2","3":"NO","4":"NO","5":"NA","6":"NA","7":"NA","8":"?","9":"No"},{"1":"Jose de los Heros","2":"second","3":"Yes","4":"Yes","5":"44515","6":"j.de-los-heros@mpp.hertie-school.org","7":"NA","8":"?","9":"No"},{"1":"Anna-Lisa Wirth","2":"2","3":"Yes","4":"Yes","5":"44516","6":"NA","7":"NA","8":"?","9":"No"},{"1":"Jiayu Yang","2":"2","3":"No","4":"No","5":"NA","6":"NA","7":"NA","8":"NUTS","9":"No"},{"1":"Himanshi Gautam","2":"2","3":"Yes","4":"Yes","5":"44518","6":"gautam.himanshi30@gmail.com","7":"NA","8":"?","9":"No"},{"1":"Andrew Wells","2":"2","3":"NO","4":"NO","5":"NA","6":"a.wells@mpp.hertie-school.org","7":"NA","8":"?","9":"No"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We can see there are several problems with this data:</p>
<ul>
<li>The column names are in the third row</li>
<li>There are columns which donâ€™t have any data in them</li>
<li>The â€˜date RSVPâ€™ column has a mixed format</li>
<li>The â€˜paid for ticketâ€™ and â€˜RSVPâ€™ columns are duplicated - suggesting that when someone RSVPs, they have to pay for their ticket anyway.</li>
<li>And moreâ€¦</li>
</ul>
<p>Letâ€™s use the <strong>janitor</strong> package to clean the data.</p>
<p>Now we have removed the useless first row and made the column names clearer using <code>clean_names</code>.</p>
<p><strong>Exercise</strong> Using janitor functions you learned in the pre-recorded session, can you</p>
<ul>
<li>Delete empty columns</li>
<li>Delete empty rows</li>
<li>Remove columns that have a constant value</li>
<li>Update the date format so that the dates are consistent? (Hint: use the lubridate package)</li>
</ul>
<p>Solution</p>
</div>
<div id="creating-tables" class="section level2">
<h2>Creating tables</h2>
<p>Janitor also offers a version of the table() function from base R, but in a much more powerful form. To demonstrate this, weâ€™re going to use a dataset on athletes who won medals at the recent Tokyo 2021 Olympics. This data was downloaded from <a href="https://www.kaggle.com/arjunprasadsarkhel/2021-olympics-in-tokyo/version/7">Kaggle, here</a></p>
<p>First we will load the data</p>
<p>What if we want to know the medal breakdown by country? Janitor uses tidyverse syntax, so we can sort the number of medals in descending order and only view the top 10 countries</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
